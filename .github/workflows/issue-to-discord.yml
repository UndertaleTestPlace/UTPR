name: Issue â†’ Discord
on:
  issues:
    types: [opened, edited, closed, reopened, labeled, unlabeled]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord
        uses: Ilshidur/action-discord@0.3.2
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
          DISCORD_EMBEDS: |
           [{
              "title": "${{ github.event.issue.title }}",
              "url": "${{ github.event.issue.html_url }}",
              "description": "${{ github.event.action }} by @${{ github.actor }}",
              "fields": [
                { "name": "State",     "value": "${{ github.event.issue.state }}", "inline": true },
                { "name": "Labels",    "value": "${{ github.event.issue.labels.*.name }}", "inline": true },
                { "name": "Assignees", "value": "${{ github.event.issue.assignees.*.login }}", "inline": true }
              ]
            }]
